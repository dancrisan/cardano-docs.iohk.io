<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Pos.Reporting.Methods</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Pos-Reporting-Methods.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Pos.Reporting.Methods.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-sl-0.2.0: Cardano SL main implementation</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Pos.Reporting.Methods</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Methods of reporting different unhealthy behaviour to server.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:sendReportNode">sendReportNode</a> :: (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="http://hackage.haskell.org/package/exceptions-0.8.3/docs/Control-Monad-Catch.html#t:MonadMask">MonadMask</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> &#1111;&#1111; m) =&gt; <a href="http://hackage.haskell.org/package/cardano-report-server-0.1.0/docs/Pos-ReportServer-Report.html#t:ReportType">ReportType</a> -&gt; m ()</li><li class="src short"><a href="#v:getNodeInfo">getNodeInfo</a> :: (<a href="Pos-DHT-Model-Class.html#t:MonadDHT">MonadDHT</a> m, <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; m <a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text.html#t:Text">Text</a></li><li class="src short"><a href="#v:reportMisbehaviour">reportMisbehaviour</a> :: <span class="keyword">forall</span> m &#1111;&#1111;. ReportingContext &#1111;&#1111; m =&gt; <a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text.html#t:Text">Text</a> -&gt; m ()</li><li class="src short"><a href="#v:reportMisbehaviourMasked">reportMisbehaviourMasked</a> :: <span class="keyword">forall</span> m &#1111;&#1111;. ReportingContext &#1111;&#1111; m =&gt; <a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text.html#t:Text">Text</a> -&gt; m ()</li><li class="src short"><a href="#v:reportingFatal">reportingFatal</a> :: <span class="keyword">forall</span> m a &#1105;. ReportingContext &#1105; m =&gt; m a -&gt; m a</li><li class="src short"><a href="#v:sendReport">sendReport</a> :: (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="http://hackage.haskell.org/package/exceptions-0.8.3/docs/Control-Monad-Catch.html#t:MonadMask">MonadMask</a> m) =&gt; [<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/System-IO.html#t:FilePath">FilePath</a>] -&gt; [<a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text.html#t:Text">Text</a>] -&gt; <a href="http://hackage.haskell.org/package/cardano-report-server-0.1.0/docs/Pos-ReportServer-Report.html#t:ReportType">ReportType</a> -&gt; <a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text.html#t:Text">Text</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Version.html#t:Version">Version</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-String.html#t:String">String</a> -&gt; m ()</li><li class="src short"><a href="#v:retrieveLogFiles">retrieveLogFiles</a> :: <a href="http://hackage.haskell.org/package/log-warper-0.4.4/docs/System-Wlog-LoggerConfig.html#t:LoggerConfig">LoggerConfig</a> -&gt; [([<a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text.html#t:Text">Text</a>], <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/System-IO.html#t:FilePath">FilePath</a>)]</li><li class="src short"><a href="#v:chooseLogFiles">chooseLogFiles</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/System-IO.html#t:FilePath">FilePath</a> -&gt; m [<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/System-IO.html#t:FilePath">FilePath</a>]</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:sendReportNode" class="def">sendReportNode</a> :: (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="http://hackage.haskell.org/package/exceptions-0.8.3/docs/Control-Monad-Catch.html#t:MonadMask">MonadMask</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> &#1111;&#1111; m) =&gt; <a href="http://hackage.haskell.org/package/cardano-report-server-0.1.0/docs/Pos-ReportServer-Report.html#t:ReportType">ReportType</a> -&gt; m () <a href="src/Pos.Reporting.Methods.html#sendReportNode" class="link">Source</a> <a href="#v:sendReportNode" class="selflink">#</a></p><div class="doc"><p>Sends node's logs, taking <code><a href="http://hackage.haskell.org/package/log-warper-0.4.4/docs/System-Wlog-LoggerConfig.html#t:LoggerConfig">LoggerConfig</a></code> from <code>NodeContext</code>,
 retrieving all logger files from it. List of servers is also taken
 from node's configuration.</p></div></div><div class="top"><p class="src"><a id="v:getNodeInfo" class="def">getNodeInfo</a> :: (<a href="Pos-DHT-Model-Class.html#t:MonadDHT">MonadDHT</a> m, <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; m <a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text.html#t:Text">Text</a> <a href="src/Pos.Reporting.Methods.html#getNodeInfo" class="link">Source</a> <a href="#v:getNodeInfo" class="selflink">#</a></p><div class="doc"><p>Retrieves node info that we would like to know when analyzing
 malicious behavior of node.</p></div></div><div class="top"><p class="src"><a id="v:reportMisbehaviour" class="def">reportMisbehaviour</a> :: <span class="keyword">forall</span> m &#1111;&#1111;. ReportingContext &#1111;&#1111; m =&gt; <a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text.html#t:Text">Text</a> -&gt; m () <a href="src/Pos.Reporting.Methods.html#reportMisbehaviour" class="link">Source</a> <a href="#v:reportMisbehaviour" class="selflink">#</a></p><div class="doc"><p>Reports misbehaviour given reason string. Effectively designed
 for <code>WorkMode</code> context.</p></div></div><div class="top"><p class="src"><a id="v:reportMisbehaviourMasked" class="def">reportMisbehaviourMasked</a> :: <span class="keyword">forall</span> m &#1111;&#1111;. ReportingContext &#1111;&#1111; m =&gt; <a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text.html#t:Text">Text</a> -&gt; m () <a href="src/Pos.Reporting.Methods.html#reportMisbehaviourMasked" class="link">Source</a> <a href="#v:reportMisbehaviourMasked" class="selflink">#</a></p><div class="doc"><p>Report misbehaveour, but catch all errors inside</p></div></div><div class="top"><p class="src"><a id="v:reportingFatal" class="def">reportingFatal</a> :: <span class="keyword">forall</span> m a &#1105;. ReportingContext &#1105; m =&gt; m a -&gt; m a <a href="src/Pos.Reporting.Methods.html#reportingFatal" class="link">Source</a> <a href="#v:reportingFatal" class="selflink">#</a></p><div class="doc"><p>Execute action, report <code><a href="Pos-Exception.html#t:CardanoFatalError">CardanoFatalError</a></code> and <code><a href="http://hackage.haskell.org/package/universum-0.2.1/docs/Panic.html#t:FatalError">FatalError</a></code> if it
 happens and rethrow. Errors related to reporting itself are caught,
 logged and ignored.</p></div></div><div class="top"><p class="src"><a id="v:sendReport" class="def">sendReport</a> :: (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="http://hackage.haskell.org/package/exceptions-0.8.3/docs/Control-Monad-Catch.html#t:MonadMask">MonadMask</a> m) =&gt; [<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/System-IO.html#t:FilePath">FilePath</a>] -&gt; [<a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text.html#t:Text">Text</a>] -&gt; <a href="http://hackage.haskell.org/package/cardano-report-server-0.1.0/docs/Pos-ReportServer-Report.html#t:ReportType">ReportType</a> -&gt; <a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text.html#t:Text">Text</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Version.html#t:Version">Version</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-String.html#t:String">String</a> -&gt; m () <a href="src/Pos.Reporting.Methods.html#sendReport" class="link">Source</a> <a href="#v:sendReport" class="selflink">#</a></p><div class="doc"><p>Given logs files list and report type, sends reports to URI
 asked. All files _must_ exist. Report server URI should be in form
 like &quot;http(s):/<em>host:port</em>&quot; without specified endpoint.</p><p><strong>Important notice</strong>: if given paths are logs that we're currently
 writing to using this executable (or forked thread), you'll get an
 error, because there's no possibility to have two handles on the
 same file, see <code><a href="System.html#v:IO">IO</a></code> documentation on handles. Use second
 parameter for that.</p></div></div><div class="top"><p class="src"><a id="v:retrieveLogFiles" class="def">retrieveLogFiles</a> :: <a href="http://hackage.haskell.org/package/log-warper-0.4.4/docs/System-Wlog-LoggerConfig.html#t:LoggerConfig">LoggerConfig</a> -&gt; [([<a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text.html#t:Text">Text</a>], <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/System-IO.html#t:FilePath">FilePath</a>)] <a href="src/Pos.Reporting.Methods.html#retrieveLogFiles" class="link">Source</a> <a href="#v:retrieveLogFiles" class="selflink">#</a></p><div class="doc"><p>Given logger config, retrieves all (logger name, filepath) for
 every logger that has file handle.</p></div></div><div class="top"><p class="src"><a id="v:chooseLogFiles" class="def">chooseLogFiles</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/System-IO.html#t:FilePath">FilePath</a> -&gt; m [<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/System-IO.html#t:FilePath">FilePath</a>] <a href="src/Pos.Reporting.Methods.html#chooseLogFiles" class="link">Source</a> <a href="#v:chooseLogFiles" class="selflink">#</a></p><div class="doc"><p>Retrieves real filepathes of logs given filepathes from log
 description. Example: there's <code>component.log</code> in config, but this
 function will return <code>[component.log.122, component.log.123]</code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>
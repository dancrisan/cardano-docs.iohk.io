<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Pos.Types.Tx</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Pos-Types-Tx.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Pos.Types.Tx.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-sl-0.2.0: Cardano SL main implementation</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Pos.Types.Tx</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Transaction related functions.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:verifyTxAlone">verifyTxAlone</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:Tx">Tx</a> -&gt; VerificationRes</li><li class="src short"><span class="keyword">data</span> <a href="#t:VTxGlobalContext">VTxGlobalContext</a> = <a href="#v:VTxGlobalContext">VTxGlobalContext</a> {<ul class="subs"></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:VTxLocalContext">VTxLocalContext</a> = <a href="#v:VTxLocalContext">VTxLocalContext</a> {<ul class="subs"><li><a href="#v:vtlTxOut">vtlTxOut</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxOutAux">TxOutAux</a></li></ul>}</li><li class="src short"><a href="#v:verifyTx">verifyTx</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Pos-Types-Tx.html#t:VTxGlobalContext">VTxGlobalContext</a> -&gt; (<a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxIn">TxIn</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Pos-Types-Tx.html#t:VTxLocalContext">VTxLocalContext</a>)) -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxAux">TxAux</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Either.html#t:Either">Either</a> [Text] [<a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxOutAux">TxOutAux</a>])</li><li class="src short"><a href="#v:verifyTxPure">verifyTxPure</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Pos-Types-Tx.html#t:VTxGlobalContext">VTxGlobalContext</a> -&gt; (<a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxIn">TxIn</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Pos-Types-Tx.html#t:VTxLocalContext">VTxLocalContext</a>) -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxAux">TxAux</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Either.html#t:Either">Either</a> [Text] [<a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxOutAux">TxOutAux</a>]</li><li class="src short"><a href="#v:topsortTxs">topsortTxs</a> :: <span class="keyword">forall</span> a. (a -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Crypto-Hashing.html#t:WithHash">WithHash</a> <a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:Tx">Tx</a>) -&gt; [a] -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> [a]</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:verifyTxAlone" class="def">verifyTxAlone</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:Tx">Tx</a> -&gt; VerificationRes <a href="src/Pos.Types.Tx.html#verifyTxAlone" class="link">Source</a> <a href="#v:verifyTxAlone" class="selflink">#</a></p><div class="doc"><p>Verify that Tx itself is correct. Most likely you will also want
 to verify that inputs are legal, signed properly and have enough coins;
 <code><a href="Pos-Types-Tx.html#v:verifyTxAlone">verifyTxAlone</a></code> doesn't do that.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:VTxGlobalContext" class="def">VTxGlobalContext</a> <a href="src/Pos.Types.Tx.html#VTxGlobalContext" class="link">Source</a> <a href="#t:VTxGlobalContext" class="selflink">#</a></p><div class="doc"><p>Global context data needed for script execution -- is same for
 the whole transaction. VT stands for &quot;Verify Tx&quot;. Currently empty.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:VTxGlobalContext" class="def">VTxGlobalContext</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"></td></tr></table></div><div class="subs instances"><p id="control.i:VTxGlobalContext" class="caption collapser" onclick="toggleSection('i:VTxGlobalContext')">Instances</p><div id="section.i:VTxGlobalContext" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:VTxGlobalContext:Show:1" class="instance expander" onclick="toggleSection('i:id:VTxGlobalContext:Show:1')"></span> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:Show">Show</a> <a href="Pos-Types-Tx.html#t:VTxGlobalContext">VTxGlobalContext</a></span> <a href="src/Pos.Types.Tx.html#line-68" class="link">Source</a> <a href="#t:VTxGlobalContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:VTxGlobalContext:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-Types-Tx.html#t:VTxGlobalContext">VTxGlobalContext</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Pos-Types-Tx.html#t:VTxGlobalContext">VTxGlobalContext</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Pos-Types-Tx.html#t:VTxGlobalContext">VTxGlobalContext</a>] -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:VTxLocalContext" class="def">VTxLocalContext</a> <a href="src/Pos.Types.Tx.html#VTxLocalContext" class="link">Source</a> <a href="#t:VTxLocalContext" class="selflink">#</a></p><div class="doc"><p>Local context data for scripts -- differs per input.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:VTxLocalContext" class="def">VTxLocalContext</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:vtlTxOut" class="def">vtlTxOut</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxOutAux">TxOutAux</a></dfn><div class="doc"><p>Transaction output</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:VTxLocalContext" class="caption collapser" onclick="toggleSection('i:VTxLocalContext')">Instances</p><div id="section.i:VTxLocalContext" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:VTxLocalContext:Show:1" class="instance expander" onclick="toggleSection('i:id:VTxLocalContext:Show:1')"></span> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:Show">Show</a> <a href="Pos-Types-Tx.html#t:VTxLocalContext">VTxLocalContext</a></span> <a href="src/Pos.Types.Tx.html#line-75" class="link">Source</a> <a href="#t:VTxLocalContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:VTxLocalContext:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-Types-Tx.html#t:VTxLocalContext">VTxLocalContext</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Pos-Types-Tx.html#t:VTxLocalContext">VTxLocalContext</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Pos-Types-Tx.html#t:VTxLocalContext">VTxLocalContext</a>] -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:verifyTx" class="def">verifyTx</a> <a href="src/Pos.Types.Tx.html#verifyTx" class="link">Source</a> <a href="#v:verifyTx" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Control-Monad.html#t:Monad">Monad</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Verify that tx itself is correct</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Verify that script &amp; address
   versions in tx are known</p></td></tr><tr><td class="src">-&gt; <a href="Pos-Types-Tx.html#t:VTxGlobalContext">VTxGlobalContext</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (<a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxIn">TxIn</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Pos-Types-Tx.html#t:VTxLocalContext">VTxLocalContext</a>))</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxAux">TxAux</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Either.html#t:Either">Either</a> [Text] [<a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxOutAux">TxOutAux</a>])</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>CHECK: Verify Tx correctness using magic function which resolves
 input into Address and Coin. It optionally does checks from
 <code><a href="Pos-Types-Tx.html#v:verifyTxAlone">verifyTxAlone</a></code> and also the following checks:</p><ul><li>sum of inputs &gt;= sum of outputs;</li><li>every input has a proper witness verifying that input;</li><li>script witnesses have matching script versions;</li><li>every input is a known unspent output.</li></ul><p>Note that <code><a href="Pos-Types-Tx.html#v:verifyTx">verifyTx</a></code> doesn't attempt to verify scripts with versions
 higher than maximum script version we can handle. That's because we want
 blocks with such transactions to be accepted (to avoid hard
 forks). However, we won't include such transactions into blocks when we're
 creating a block.</p></div></div><div class="top"><p class="src"><a id="v:verifyTxPure" class="def">verifyTxPure</a> <a href="src/Pos.Types.Tx.html#verifyTxPure" class="link">Source</a> <a href="#v:verifyTxPure" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Verify that tx itself is correct</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Verify that script &amp; address
   versions in tx are known</p></td></tr><tr><td class="src">-&gt; <a href="Pos-Types-Tx.html#t:VTxGlobalContext">VTxGlobalContext</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (<a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxIn">TxIn</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Pos-Types-Tx.html#t:VTxLocalContext">VTxLocalContext</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxAux">TxAux</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Either.html#t:Either">Either</a> [Text] [<a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:TxOutAux">TxOutAux</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:topsortTxs" class="def">topsortTxs</a> :: <span class="keyword">forall</span> a. (a -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Crypto-Hashing.html#t:WithHash">WithHash</a> <a href="http://hackage.haskell.org/package/cardano-sl-core-0.1.0.0/docs/Pos-Types-Types.html#t:Tx">Tx</a>) -&gt; [a] -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> [a] <a href="src/Pos.Types.Tx.html#topsortTxs" class="link">Source</a> <a href="#v:topsortTxs" class="selflink">#</a></p><div class="doc"><p>Does topological sort on things that contain transactions &#8211; e.g. can be
 used both for sorting <code>[Tx]</code> and <code>[(Tx, TxWitness)]</code>.</p><p>(Backwards dfs from every node with reverse visiting order
 recording. Returns nothing on loop encountered. Return order is
 head-first.)</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>